@model Hospital_Management.Models.DoctorModel

<h2>Add Doctor</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    @Html.HiddenFor(x => x.DoctorId)

    <div class="form-group">
        @Html.TextBoxFor(x => x.DoctorName, new
        {
            @class = "form-control",
        placeholder = "Doctor Name"
        })
    @Html.ValidationMessageFor(x => x.DoctorName, "", new { @class = "text-danger" })
</div>

<!-- ================= Specialization Dropdown ================= -->
<div class="form-group">
    @Html.LabelFor(x => x.Specialization)
    @Html.DropDownListFor(
        x => x.Specialization,
        Model.SpecializationList,
        "-- Select Specialization --",
        new { @class = "form-control", id = "specializationDropdown" }
        )
    @Html.ValidationMessageFor(x => x.Specialization, "", new { @class = "text-danger" })
</div>

<!-- ================= Other Specialization ================= -->
<div class="form-group" id="otherSpecDiv" style="display:none;">
    <label>Other Specialization</label>
    @Html.TextBoxFor(x => x.OtherSpecialization, new {
        @class = "form-control",
        placeholder = "Enter specialization"
        })
    @Html.ValidationMessageFor(x => x.OtherSpecialization, "", new { @class = "text-danger" })
</div>

<div class="form-group">
    @Html.TextBoxFor(x => x.WorkPlace, new
        {
        @class = "form-control",
        placeholder = "Workplace"
        })
    @Html.ValidationMessageFor(x => x.WorkPlace, "", new { @class = "text-danger" })
</div>

<!-- ================= Experience ================= -->
<div class="form-group">
    @Html.TextBoxFor(x => x.Experience, new
        {
        @class = "form-control",
        type = "number",
        id = "Experience",
        min = "0",
        max = "70",
        step = "1",
        placeholder = "Experience in years",
        onkeydown = "return !['e','E','+','-'].includes(event.key)"
        })

    <!-- 🔴 Alert message yahin dikhega -->
    <span id="expError" class="text-danger"></span>
</div>

<input type="submit" value="Update" class="btn btn-success" />
}

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            /* ===== Existing Specialization logic (NO CHANGE) ===== */
            const dropdown = document.getElementById("specializationDropdown");
            const otherDiv = document.getElementById("otherSpecDiv");

            function toggleOther() {
                if (dropdown.value === "Other") {
                    otherDiv.style.display = "block";
                } else {
                    otherDiv.style.display = "none";
                }
            }

            dropdown.addEventListener("change", toggleOther);
            toggleOther(); // edit load ke liye

            /* ===== ONLY NEW FUNCTIONALITY (Experience Alert) ===== */
            const expInput = document.getElementById("Experience");
            const expError = document.getElementById("expError");

            expInput.addEventListener("input", function () {
                const value = parseInt(expInput.value);

                if (!isNaN(value) && value > 70) {
                    expError.innerText = "Experience can not be more then 70!";
                } else {
                    expError.innerText = "";
                }
            });
        });
    </script>
}
