@model Hospital_Management.Models.DoctorModel

<h2>Edit Doctor</h2>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    @Html.HiddenFor(x => x.DoctorId)

    <div class="form-group">
        @Html.TextBoxFor(x => x.DoctorName, new
        {
            @class = "form-control",
        placeholder = "Doctor Name"
        })
    @Html.ValidationMessageFor(x => x.DoctorName, "", new { @class = "text-danger" })
</div>

<!-- ================= Specialization Dropdown ================= -->
<div class="form-group">
    @Html.LabelFor(x => x.Specialization)
    @Html.DropDownListFor(
        x => x.Specialization,
        Model.SpecializationList,
        "-- Select Specialization --",
        new { @class = "form-control", id = "specializationDropdown" }
        )
    @Html.ValidationMessageFor(x => x.Specialization, "", new { @class = "text-danger" })
</div>

<!-- ================= Other Specialization ================= -->
<div class="form-group" id="otherSpecDiv" style="display:none;">
    <label>Other Specialization</label>
    @Html.TextBoxFor(x => x.OtherSpecialization, new
        {
            @class = "form-control",
        placeholder = "Enter specialization"
        })
    @Html.ValidationMessageFor(
        x => x.OtherSpecialization,
        "",
        new { @class = "text-danger" }
        )
</div>

<div class="form-group">
    @Html.TextBoxFor(x => x.WorkPlace, new
        {
            @class = "form-control",
        placeholder = "Workplace"
        })
    @Html.ValidationMessageFor(x => x.WorkPlace, "", new { @class = "text-danger" })
</div>

<div class="form-group">
    @Html.TextBoxFor(x => x.Experience, new
        {
            @class = "form-control",
        type = "number",
        id = "Experience",
        min = "0",
        max = "70",
        step = "1",
        placeholder = "Experience in years",
        onkeydown = "return !['e','E','+','-'].includes(event.key)"
        })
    <span id="expError" class="text-danger"></span>
</div>

<input type="submit" value="Update" class="btn btn-success" />
}


@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            const specializationDropdown = document.getElementById("specializationDropdown");
            const otherSpecDiv = document.getElementById("otherSpecDiv");

            if (!specializationDropdown || !otherSpecDiv) {
                console.error("Dropdown or div not found");
                return;
            }

            function toggleOtherSpec() {
                if (specializationDropdown.value === "Other") {
                    otherSpecDiv.style.display = "block";
                } else {
                    otherSpecDiv.style.display = "none";
                }
            }

            specializationDropdown.addEventListener("change", toggleOtherSpec);

            // 🔥 Edit ke liye page load pe bhi
            toggleOtherSpec();
        });
    </script>
}


